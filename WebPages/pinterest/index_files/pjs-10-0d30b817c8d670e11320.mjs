(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[10],{"+8U0":function(e,t,i){function n(e){const t=e.split("@")[0];let i="";return i=(i=(i=t.includes(".")?t.replace("."," "):t.includes("_")?t.replace("_"," "):t).replace(/[0-9]/g,"")).replace(/\w\S*/g,e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase())}i.d(t,"a",(function(){return n}))},EVO9:function(e,t,i){i.d(t,"a",(function(){return o}));var n=i("0/lC");function o(e){const t=e&&-1!==e.indexOf("@")?e.split("@"):[];if(2===t.length){const e=t[1],i=e&&-1!==e.indexOf(".")?e.split("."):[];if(i.length>=2&&"gmail"===i[0]&&"com"!==i.slice(1).join("."))return!0;const o=Object(n.a)(e,"gmail.com");if("g"===e.charAt(0)&&(1===o||2===o))return!0}return!1}},aZSR:function(e,t,i){var n=i("q1tI"),o=i.n(n),a=i("jv6m"),s=i("Ye/N"),r=i("n6mq");t.a=()=>o.a.createElement(r.c,{alignItems:"center",display:"flex",justifyContent:"center",position:"absolute",width:"100%",height:"100%"},o.a.createElement(r.c,{color:"white",height:600,minWidth:"500px",rounding:2,width:"30%"},o.a.createElement(r.c,{alignItems:"center",direction:"column",display:"flex",height:"99%",justifyContent:"center",padding:12},o.a.createElement(r.c,{alignItems:"center",color:"red",display:"flex",height:60,justifyContent:"center",marginBottom:4,rounding:"circle",width:60},o.a.createElement(r.n,{accessibilityLabel:s.a._("Loading state for google one tap registration"),color:"white",icon:"pin",size:"28"})),o.a.createElement(r.c,{alignItems:"center",paddingY:5,dangerouslySetInlineStyle:{__style:{"text-align":"center"}}},o.a.createElement(r.m,null,s.a._("Welcome to Pinterest!","Welcome to Pinterest!","Welcome to Pinterest!"))),o.a.createElement(r.K,{align:"center",overflow:"normal"},o.a.createElement("span",{className:"deprecatedTextSizeXL"},s.a._("Your answers to the next questions will help us find the right ideas for you","loading state description while waiting for google one tap registration to complete","loading state description while waiting for google one tap registration to complete")))),o.a.createElement(a.a,{duration:6e3,finalProgress:95})))},bFXG:function(e,t,i){i.d(t,"a",(function(){return n}));const n={DEFAULT_TOGGLE:"DEFAULT_TOGGLE",NO_TOGGLE:"NO_TOGGLE",SMALL_TOGGLE:"SMALL_TOGGLE",NOT_NOW_BUTTON:"NOT_NOW_BUTTON"}},fyRi:function(e,t,i){var n=i("q1tI"),o=i.n(n),a=i("JW66"),s=i("Ye/N"),r=i("NSVK"),l=i("inSI"),d=i("n6mq");var c=e=>{const{age:t,error:i,handleAgeChange:n,handleSubmit:a,inputRef:r}=e;return o.a.createElement(d.c,null,o.a.createElement("form",{method:"post",noValidate:!0,onSubmit:e=>{e.preventDefault(),a()}},o.a.createElement(d.c,null,o.a.createElement(d.K,{align:"left"},s.a._("How old are you?","Title for the age collection input field after connecting with Facebook or Google","Title for the age collection input field after connecting with Facebook or Google"))),o.a.createElement(d.c,{marginTop:2}),o.a.createElement(d.c,null,o.a.createElement(d.M,{id:"age",errorMessage:i||"",onChange:n,placeholder:s.a._("Age","text field for user to enter their age","text field for user to enter their age"),ref:e=>{r&&r(e)},size:"lg",type:"number"})),o.a.createElement(d.c,{marginTop:3}),o.a.createElement(d.c,null,o.a.createElement(d.d,{color:"red",disabled:!t,text:s.a._("Continue"),type:"submit"}))))},h=i("28DW"),g=i("DrcS"),p=i("jsIX"),u=i("/5zs"),m=i("U4JR"),f=i("VL22"),E=i("pLLR");function b(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const S={container:{margin:"0 auto",width:"268px"}};class w extends n.Component{constructor(...e){super(...e),b(this,"state",{age:"",error:""}),b(this,"getViewParameter",e=>e.type===f.a.FACEBOOK?3205:e.type===f.a.GOOGLE?3204:e.type===f.a.GOOGLE_ONE_TAP?3201:void 0),b(this,"handleAgeChange",({value:e})=>{this.setState({age:e})}),b(this,"handleSignupSuccess",()=>{this.track("signup_success"),Object(m.a)(7487,{viewParameter:this.getViewParameter(this.props.registrationCredentials)});const{showResponseMessageModal:e}=this.props;e?e(!0):r.c.handleSignupRedirect(this.props.nextUrlParam||window.location.pathname,!0)}),b(this,"handleSignupFailure",e=>{this.track("signup_failure"),this.props.loadingIndicatorCallback&&this.props.loadingIndicatorCallback(!1),this.props.showSignupWelcomeLoadingFn&&this.props.showSignupWelcomeLoadingFn(!1),Object(m.a)(7488,{viewParameter:this.getViewParameter(this.props.registrationCredentials)});let t=e.message||s.a._("Oops! Something went wrong… Click Continue to try again.","Error during signup during age collection step","Error during signup during age collection step");e.api_error_code===a.a.API_ERROR_UNDERAGE_REGISTER_ATTEMPT&&(t=s.a._("Uh oh... it looks like you’re not old enough just yet.","Underage error during signup","Underage error during signup")),this.setState({error:t})}),b(this,"handleSubmit",()=>{const{age:e}=this.state;this.track(`submit_button_click.${e||"undefined"}`);const{loadingIndicatorCallback:t,registrationCredentials:i,requestContext:n,showSignupWelcomeLoadingFn:o,showResponseMessageModal:a}=this.props,s=this.validateAge(e||"");if(s)return void this.setState({error:s});let r;this.setState({error:""}),i.type===f.a.GOOGLE_ONE_TAP?r="web_unauth_google_one_tap_welcome":i.type===f.a.GOOGLE?r="web_unauth_gplus_welcome_v2":i.type===f.a.FACEBOOK&&(r="web_unauth_fb_welcome_v2");let l=!1;if(r?(l=new u.c(n,r).enabled(),n.experiments.flush()):t&&t(!0),Object(m.a)(7537,{viewParameter:this.getViewParameter(i)}),i.type===f.a.FACEBOOK){this.track("attempt_signup");const t={...g.a.buildFacebookRegistrationResourceOptions(i.userData),...i.credentialsAndLoggingData,recapToken:null,age:e};g.a.register(t).then(this.handleSignupSuccess,this.handleSignupFailure)}else i.type!==f.a.GOOGLE&&i.type!==f.a.GOOGLE_ONE_TAP||(this.track("attempt_signup"),g.a.register({...i.credentialsAndLoggingData,age:e}).then(this.handleSignupSuccess,this.handleSignupFailure));!a&&o&&l&&o(!0)})}componentDidMount(){this.track("shown"),this.focusInputField()}track(e){const{container:t,registrationCredentials:i}=this.props,n=i?i.type:"undefined";Object(h.a)(`unauth_web.age_collection_form.${e}.${n}.${t||""}`)}focusInputField(){this.inputRef&&this.inputRef.textfield&&this.inputRef.textfield.focus()}validateAge(e){return s.a._("Please enter at least two digits.","Error message when age is less than two digits long","Error message when age is less than two digits long"),Object(l.a)(e,[Object(p.a)({message:s.a._("Please enter a valid number.")})])}render(){const{age:e,error:t}=this.state;return o.a.createElement("div",{style:S.container},o.a.createElement(c,{age:e,error:t,handleAgeChange:this.handleAgeChange,handleSubmit:this.handleSubmit,inputRef:e=>{this.inputRef=e}}))}}b(w,"defaultProps",{container:"undefined"});t.a=Object(E.e)(w)},jv6m:function(e,t,i){i.d(t,"a",(function(){return s}));var n=i("q1tI"),o=i.n(n),a=i("n6mq");class s extends n.PureComponent{constructor(...e){var t,i,n;super(...e),n={startProgressBar:!1},(i="state")in(t=this)?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n}componentDidMount(){setTimeout(()=>{this.setState({startProgressBar:!0})},0)}render(){const{duration:e,finalProgress:t,showLightGrayBackground:i,rounded:n}=this.props;return o.a.createElement(a.c,{width:"100%",color:i?"lightGray":"transparent",rounding:n?2:0},o.a.createElement(a.c,{color:"red",height:6,rounding:2,width:`${t}%`,dangerouslySetInlineStyle:{__style:{transform:this.state.startProgressBar?"scale(1, 1)":"scale(0, 1)",transformOrigin:"left",transitionDuration:`${e}ms`,transitionTimingFunction:"ease-in"}}}))}}},pXxl:function(e,t,i){i.r(t);var n=i("q1tI"),o=i.n(n),a=i("/MKj"),s=i("xdpg"),r=i("Cufx"),l=i("pz/u"),d=i("N9+J"),c=i("Ye/N"),h=i("28DW"),g=i("n6mq");function p(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class u extends n.PureComponent{constructor(...e){super(...e),p(this,"inputRef",null),p(this,"handleNotNowClick",()=>{Object(h.a)("unauth.fb_phone_only_signup.email_step.not_now_click"),this.props.onNotNowClick&&this.props.onNotNowClick()})}componentDidMount(){this.focusInputField(),Object(h.a)("unauth.fb_phone_only_signup.email_step")}focusInputField(){this.inputRef&&this.inputRef.textfield&&this.inputRef.textfield.focus()}render(){c.a._("We use your email address for account creation and for important security and legal notices.","subtitle to explain the step on email collection form","subtitle to explain the step on email collection form");const{email:e,emailError:t,handleEmailChange:i,handleSubmit:n}=this.props,a=c.a._("Oops. We're unable to create your account without your email. To continue, make sure you provide email to create your account.","subtitle to explain the step on email collection form","subtitle to explain the step on email collection form");return o.a.createElement(g.c,{marginTop:3},o.a.createElement("form",{method:"post",noValidate:!0,onSubmit:e=>{e.preventDefault(),n()}},o.a.createElement(g.K,{align:"left",overflow:"normal"},a),o.a.createElement(g.c,{marginTop:3}),o.a.createElement(g.c,null,o.a.createElement(g.M,{id:"email",errorMessage:t,onChange:i,placeholder:c.a._("Email address","email placeholder in the email inputfield on email collection form","email placeholder in the email inputfield on email collection form"),ref:e=>{this.inputRef=e},size:"lg",type:"email"})),o.a.createElement(g.c,{marginTop:5}),o.a.createElement(g.d,{color:"red",text:c.a._("Continue","word on the button which to submit user email information","word on the button which to submit user email information"),type:"submit",disabled:!e}),o.a.createElement(g.c,{marginTop:2}),o.a.createElement(g.d,{text:c.a._("Not now","word on not now button to dismiss the collection form","word on not now button to dismiss the collection form"),type:"submit",onClick:this.handleNotNowClick})))}}var m=i("NSVK"),f=i("eOdZ"),E=i("inSI"),b=i("DrcS"),S=i("c50B"),w=i("VL22"),y=i("pLLR");function _(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const x={container:{margin:"0 auto",width:"268px"}},C={EMAIL:"email"};var v=Object(y.e)(class extends n.Component{constructor(e){super(e),_(this,"mounted",!1),_(this,"handleEmailChange",({value:e})=>{this.setState({email:e})}),_(this,"showError",(e,t)=>{this.mounted&&t===C.EMAIL&&this.setState({emailError:e})}),_(this,"handleSubmit",()=>{if(Object(h.a)("unauth.fb_phone_only_signup.submit_email"),this.state.email)Object(h.a)("unauth.fb_phone_only_signup.submit_email"),this.attemptEmailSignupOrLogin();else{const e=c.a._("Email is required","email error message","email error message");this.setState({emailError:e})}}),_(this,"handleSignupSuccess",()=>{m.c.handleSignupRedirect(this.props.nextUrlParam||window.location.pathname,!0),Object(h.a)("unauth.fb_phone_only_signup.signup_success")}),_(this,"handleSignupFailure",e=>t=>{const i=t.message||c.a._("Oops! Something went wrong… Click Continue to try again.","Error during signup during FB email collection step","Error during signup during FB email collection step");this.showError(i,e),Object(h.a)("unauth.fb_phone_only_signup.signup_failure")}),_(this,"attemptEmailSignupOrLogin",()=>{const{country:e}=this.props.requestContext,{email:t}=this.state,i=[Object(S.e)({message:c.a._("Hmm... that doesn't look like an email address.","email error message","email error message")})],n=Object(E.a)(t,i);if(n)return Object(h.a)("unauth.fb_phone_only_signup.email_validation_failure"),void this.setState({emailError:n});const{registrationCredentials:{type:o,credentialsAndLoggingData:a},showSocialSignupWithAgeStep:s,showEmailAlreadyExistModal:r}=this.props,l={email:t,facebook_token:a.facebook_token?a.facebook_token:"",facebook_id:a.facebook_id?a.facebook_id:""};f.a.create("EmailExistsResource",{email:t}).callGet().then(t=>{!1===t.resource_response.data?Object(w.d)(e)?s(o,l,a):b.a.attemptFacebookRegistration({...l},!0).then(this.handleSignupSuccess,this.handleSignupFailure(C.EMAIL)):(r(o,l,a),Object(h.a)("unauth.fb_phone_only_signup.email_existed"))},()=>{const e=c.a._("Hmm... that doesn't look like an email address.","email error message","email error message");this.showError(e,C.EMAIL),Object(h.a)("unauth.fb_phone_only_signup.email_exist_api_call_failure")})}),this.state={email:"",emailError:""}}componentDidMount(){this.mounted=!0,this.props.loadingIndicatorCallback&&this.props.loadingIndicatorCallback(!1)}componentWillUnmount(){this.mounted=!1}render(){return o.a.createElement("div",{style:x.container},o.a.createElement(u,{email:this.state.email,emailError:this.state.emailError,handleEmailChange:this.handleEmailChange,handleSubmit:this.handleSubmit,onNotNowClick:this.props.onNotNowClick}))}});function T(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const L={signupTitle:{color:"#333",fontSize:"36px",fontWeight:"600",WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",letterSpacing:"-1.2px"}};class k extends n.Component{constructor(...e){super(...e),T(this,"componentDidMount",()=>{const{container:e,hybridTier:t,modalType:i}=this.props;Object(h.a)("web.unauth.modal_title.view"),Object(h.a)(`unauth_web_modal.${e||"unknown"}.${t||"undefined_tier"}.${i}.shown`)}),T(this,"getSignupTitleStyles",()=>{const{darkSignupTitle:e}=this.props;let t=L.signupTitle;return e&&(t={...t,color:"#000"}),t})}render(){const{titleText:e}=this.props,t=this.getSignupTitleStyles();return o.a.createElement("h3",{style:t},e)}}var O=i("shJ5"),P=i("7KqT"),R=i("qrz1"),M=i("zYLT"),F=i("+8U0"),A=i("17x9"),I=i.n(A);const B={separator:{borderBottom:"#dedede 1px solid",margin:"5px auto",width:"110px"}};function V({css:e={}}){const t=Object.assign({},B.separator,e);return o.a.createElement("div",{style:t})}var N=i("rvlh");function j(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const W={header:{color:"#5a5a5a",fontWeight:500,fontSize:"12px"},button:{width:"160px",fontSize:"14px",padding:"10px 20px"}};class U extends n.Component{constructor(...e){super(...e),j(this,"state",{hover:!1}),j(this,"toggleHover",()=>{this.setState({hover:!this.state.hover})})}render(){const{buttonText:e,fullWidth:t,link:i,onClick:n,title:a,titleStylesOverride:s,useSmallButton:r}=this.props;let d=W.header;s&&(d={...d,...s});const c=t?{...W.button,width:"100%",marginTop:"0"}:W.button;let h=o.a.createElement(l.a,{className:"lightGray",href:i,onClick:n,styleOverrides:c,type:"button"},e),p={};if(r){d={...d,float:"left"},p={margin:"0 auto 5px",width:"fit-content",alignItems:"baseline"};const t={color:"#333",cursor:"pointer",marginLeft:"5px"};h=o.a.createElement(g.c,{onMouseEnter:this.toggleHover,onMouseLeave:this.toggleHover},o.a.createElement("a",{onClick:n,style:t},e))}return o.a.createElement("div",{style:p},a&&o.a.createElement("h5",{style:d},a),h)}}var D=i("aZSR"),z=i("fyRi"),G=i("kmwA"),q=i("zwad"),H=i("fArA"),Y=i("bFXG"),K=i("xRaM"),$=i("vvax"),J=i("U4JR"),Q=i("1kvE"),X=i("liz/"),Z=i("3fKP"),ee=i("EC67");function te(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const ie=G.a.settings.PARTNER_SITE_SIGNUP,ne={signup:{backgroundColor:"#fff",borderRadius:"8px",position:"relative",textAlign:"center",width:"404px",margin:"auto",minHeight:"450px",boxShadow:"0 2px 10px rgba(0,0,0,0.45)"},signupMobile:{backgroundColor:"#fff",position:"absolute",left:"0",right:"0",top:"0",minHeight:"100vh",textAlign:"center"},signupModal:{textAlign:"center"},signupForm:{minHeight:"400px",padding:"20px 10px 24px"},signupInviteForm:{minHeight:"400px",padding:"30px 10px 20px"},signupTitleContainer:{margin:"0 auto 18px",width:"270px"},signupTitleMfaContainer:{padding:"0 10px"},signupTitle:{color:"#333",fontSize:"36px",fontWeight:"600",WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",letterSpacing:"-1.2px"},haveAccountText:{display:"inline-block",marginRight:"4px"},logoContainer:{display:"block",height:"45px",margin:"5px auto 8px",width:"45px"},pinterestLogo:{textAlign:"center",paddingTop:"20px",display:"inline-block"},inputFields:{backgroundColor:"#f0f0f0",border:"0px",outline:"none"},separator:{borderBottom:"#efefef 1px solid",margin:"20px 0px 15px -68px",width:"404px"},signupLoginToggle:{color:"#333",fontSize:"14px",fontWeight:"normal",WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale"},profilePic:{margin:"0 auto 16px",width:"108px"},personalizedModalContainer:{backgroundColor:"#fff",borderRadius:"8px",padding:"22px 0",position:"relative",textAlign:"center",width:"400px",margin:"auto",boxShadow:"0 2px 10px rgba(0,0,0,0.45)"},closeButton:{backgroundColor:"transparent",backgroundRepeat:"no-repeat",border:"none",outline:"none",overflow:"hidden",padding:"10px",position:"absolute",right:"10px",top:"10px"},notNowButton:{border:"none",color:"#717171",fontWeight:"bold",textDecoration:"none",backgroundColor:"#eee",height:"36px",borderRadius:"5px",fontSize:"16px",width:"268px",marginTop:"10px"},onClickEmailConfirmationButton:{width:"270px",marginTop:"40px"},signupSubtitles:{textAlign:"center",color:"#333",fontSize:"16px",fontWeight:"normal",margin:"-15px 0 32px"},businessHeader:{float:"left",color:"#333",fontSize:"12px",fontWeight:"bold",WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale"},businessLink:{cursor:"pointer",marginLeft:"5px",float:"left",color:"#333",fontSize:"12px"},businessContainer:{margin:"10px auto 5px",display:"flex",alignItems:"baseline",width:"fit-content",justifyContent:"center"},closeButtonStyle:{position:"absolute",right:"10px",paddingTop:"10px",zIndex:"1"}};class oe extends n.Component{constructor(e){super(e),te(this,"getNextUrlParam",()=>{const{nextUrlParam:e}=this.props;return e?decodeURIComponent(e):e}),te(this,"getNextUrl",e=>this.getNextUrlParam()?q.a.buildRelativeUrl(e,{next:this.getNextUrlParam()}):e),te(this,"getSignupBoxStyle",()=>{const{container:e}=this.props;return"home_page"===e?{...ne.signup,minHeight:"initial"}:ne.signup}),te(this,"showAdditionalStep",e=>(t,i,n)=>{this.setState({type:e,socialRegistrationCredentials:{type:t,userData:i,credentialsAndLoggingData:n}})}),te(this,"tagline",(e,t)=>{const i=c.a._("Sign up to see more","sigup copy default includes pin click and scrolling","sigup copy default includes pin click and scrolling"),n={defaultSource:i,boardInvite:c.a._("Sign up to accept your board invite","Sign up copy board invite","Sign up copy board invite"),userFollow:c.a._("Sign up to see more of this profile","signup copy user follow","signup copy user follow"),userProfilePage:c.a._("Sign up to see more of this profile","signup copy profile page","signup copy profile page"),saveButton:c.a._("Sign up to see more","signup copy save button","signup copy save button"),signupButton:c.a._("Sign up to see more","signup copy signup button","signup copy signup button"),homePage:c.a._("Welcome to Pinterest","Title on desktop signup modal on home page","Title on desktop signup modal on home page"),login:i,loginMfa:i,actionButton:i,boardPage:i,giftWrap:i,invite:i,mwebDefaultSource:i,navigateBoard:i,navigateInterest:i,navigatePin:i,personalizedFlyout:i,unauthVisualSearch:i,unauthBanner:i,unauthHeader:i},o=c.a._("Log in to see more","Title on desktop login modal","Title on desktop login modal"),a={boardInvite:c.a._("Log in to accept your board invite","Login copy board invite","Login copy board invite"),invite:c.a._("Log in to invite friends"),login:o,saveButton:c.a._("Log in to see more","Title on desktop login modal","Title on desktop login modal"),homePage:c.a._("Welcome to Pinterest","Title on desktop signup modal on home page","Title on desktop signup modal on home page"),defaultSource:o,loginMfa:o,actionButton:o,boardPage:o,giftWrap:o,unauthVisualSearch:o,mwebDefaultSource:o,navigateBoard:o,navigateInterest:o,navigatePin:o,personalizedFlyout:o,signupButton:o,unauthBanner:o,userFollow:o,userProfilePage:o,unauthHeader:o},s={login:c.a._("Two-Factor Authentication Required")};let r;return r=e===Z.c.signup||e===Z.c.signupOrPersonalizedLogin?n[t]:e===Z.c.loginMfa?s[Z.b.login]:a[t]}),te(this,"valuePropAsSubtitle",e=>e===Z.b.homePage?c.a._("Find new ideas to try","Value prop on desktop signup modal on home page","Value prop on desktop signup modal on home page"):c.a._("Discovery starts here","Pinterest value proposition on desktop login modal","Pinterest value proposition on desktop login modal")),te(this,"valuePropAsTitle",()=>c.a._("Unlimited free access to the world's best ideas","Value prop on desktop signup modal","Value prop on desktop signup modal")),te(this,"switchToSignup",()=>{this.setModalType(Z.c.signup)}),te(this,"toggleMagicLinkConfirmation",e=>{this.setState({type:e?Z.c.magicLinkConfirmation:Z.c.login})}),te(this,"clearPassword",()=>{this.setState({password:""})}),te(this,"handlePreventRegisterFromPersonalizedModal",e=>{Object(h.a)(`unauth.personalized_login.prevent_register.${e}`),this.setState({headerStyle:"default",isPersonalizedModal:!1,isLoading:!1}),this.switchToSignup()}),te(this,"handleNotYouClick",e=>{const{viewer:t}=this.props;e.event.preventDefault(),this.state.type===Z.c.FBEmailAlreadyExist?this.setState({headerStyle:"default",isPersonalizedModal:!1,password:"",type:Z.c.login}):this.setState({headerStyle:"default",isPersonalizedModal:!1,password:""}),Object(h.a)("unauth.personalized_login.not_you.click"),Object(h.d)("click_change_signin_account"),t.isAuth?Object(J.a)(101,{element:10879,login_state:t.isLimitedLogin?2:1}):Object(J.a)(101,{element:10879})}),te(this,"toggleLoadingIndicator",e=>{this.setState({isLoading:e})}),te(this,"handleLoginToggleButtonClick",e=>{const{handleModalTypeSwitch:t}=this.props;this.trackScopedAction("login_toggle_click"),Object(h.d)("click_toggle_login"),t&&t(),this.setModalType(Z.c.login,e),this.setWelcomeBackMessageForExistingEmail(!1)}),te(this,"handleSignupToggleButtonClick",e=>{const{handleModalTypeSwitch:t}=this.props;this.trackScopedAction("signup_toggle_click"),Object(h.d)("click_toggle_signup"),t&&t(),this.setModalType(Z.c.signup,e)}),te(this,"handleConfirmationPageButtonClick",e=>{this.setModalType(Z.c.login,e)}),te(this,"handleNotNowClick",e=>{this.setModalType(Z.c.signup,e),this.toggleLoadingIndicator(!1)}),te(this,"handleSignupToggleFromPersonalized",e=>{const{viewer:t}=this.props;e.event.preventDefault(),Object(h.a)("unauth.personalized_login.signup_instead.click"),this.setState({password:""}),t.isAuth?Object(J.a)(101,{element:10880,login_state:t.isLimitedLogin?2:1}):Object(J.a)(101,{element:10880}),this.handleSignupToggleButtonClick(e)}),te(this,"handlePostConnectClick",()=>{Object(h.a)("unauth.fb_email_reauth.post_connect.click")}),te(this,"handlePostSuccessConnect",()=>{Object(h.a)("unauth.fb_email_reauth.post_success.connect")}),te(this,"handleShowRegisterForm",()=>{this.setState({isShowRegisterForm:!0})}),te(this,"showSignupWelcomeLoadingFn",e=>{this.setState({showSignupWelcomeLoading:e}),this.props.handleShowingSignupWelcomeLoading&&this.props.handleShowingSignupWelcomeLoading(e)}),te(this,"setWelcomeBackMessageForExistingEmail",e=>{this.setState({isExitingUserInSignup:e})}),te(this,"renderSocialSignupModalText",(e,t,i)=>{const{container:a,darkSignupTitle:s,delayedTitleRender:l,hybridTier:d,inviter:h,type:g}=this.props;if(e){const e=h?h.first_name:"",t=h?h.image_medium_url:"",p=g===Z.c.respondMessage,u=p?c.a._("Sign up and let {{ name }} know what you think","Prompt user to signup to access all Pinterest features","Prompt user to signup to access all Pinterest features").replace("{{ name }}",e):c.a._("Join {{ name }} on Pinterest for more ideas","Prompt user to signup to access all Pinterest features","Prompt user to signup to access all Pinterest features").replace("{{ name }}",e);return o.a.createElement(n.Fragment,null,o.a.createElement("div",{style:ne.profilePic},o.a.createElement(r.a,{src:t,name:e,verified:p})),o.a.createElement("div",{style:i},!l&&o.a.createElement(k,{container:a,darkSignupTitle:s,hybridTier:d,modalType:Z.a.signup,titleText:u})))}return t});const t=q.a.getQueryStringParams();this.state={clearError:!1,type:"signup"===t.type?Z.c.signup:this.props.type,email:e.email||"",password:"",age:void 0,gender:"",mfaCode:"",mfaCreds:e.mfaCreds||null,mfaPhoneNumberEnd:"",name:"",isExitingUserInSignup:!1,isPersonalizedModal:null,isLoading:!1,socialRegistrationCredentials:this.props.socialRegistrationCredentials,step:"signup",showSignupWelcomeLoading:!1,isShowRegisterForm:!1}}componentDidMount(){const{AMPClientId:e,userInfo:t,viewer:i}=this.props;if(this.logModalShown(this.state.type),this.context.logging&&(i.isAuth?Object(J.a)(1771,{view:this.context.logging.viewType,viewParameter:this.context.logging.viewParameter,login_state:i.isLimitedLogin?2:1}):Object(J.a)(1771,{view:this.context.logging.viewType,viewParameter:this.context.logging.viewParameter})),e&&Object(h.f)("signup_page_from_amp",{amp_client_id:e}),i.isAuth&&i.isLimitedLogin){const e={connected_to_facebook:this.isLimitedLoginUserFBConnected(),connected_to_google:this.isLimitedLoginUserGplusConnected(),email:i.email,first_name:i.firstName,has_password:i.hasPassword,medium_image_url:i.imageMediumUrl};this.setPersonalizedModal(e)}else this.setPersonalizedModal(t)}componentDidUpdate(e,t){this.state.type!==t.type&&this.logModalShown(this.state.type),this.props.userInfo!==e.userInfo&&this.setPersonalizedModal(this.props.userInfo),this.props.type!==e.type&&this.setState({type:this.props.type,email:this.props.email||"",password:"",age:void 0,gender:"",mfaCode:"",mfaCreds:this.props.mfaCreds||null,mfaPhoneNumberEnd:"",name:"",socialRegistrationCredentials:this.props.socialRegistrationCredentials})}componentWillUnmount(){const{isAccountSwitch:e,container:t}=this.props;e&&(Object(X.k)("add_account_dismiss",null,t),Object(X.h)(t))}getSignupStyles(){const e=this.props.modal,t=this.getSignupBoxStyle();return e?ne.signupModal:t}setModalType(e,t){this.setState({type:e})}setNameFromEmail(){this.setState({name:Object(F.a)(this.state.email)})}setPersonalizedModal(e){const{isAccountSwitch:t}=this.props,{isPersonalizedModal:i,type:n}=this.state;t||e&&Object.keys(e).length>0&&!i&&n!==Z.c.signup&&(e.medium_image_url.endsWith("user/default_150.png")&&(e.medium_image_url=""),this.setState({isPersonalizedModal:!0,userInfo:e}))}logModalShown(e){Object(h.a)(`unauth.authentication_modal.shown.${this.props.toggleType}.${e}`)}trackScopedAction(e){Object(h.a)(`unauth.authentication_modal.${e}.${this.props.toggleType}.${this.state.type}`)}handleDataChange(e,t){const i={};i[e]=t.target.value,this.setState(i)}handleLoginWithMfa(e,t){const i={mfaCreds:e,mfaPhoneNumberEnd:void 0};t&&t.phone_number_end&&(i.mfaPhoneNumberEnd=t.phone_number_end),this.setState(i),this.setModalType(Z.c.loginMfa)}changeStep(e){this.setState({step:e})}isUnidentifiedSignupMethod(){const{viewer:e}=this.props;if(e.isAuth&&e.isLimitedLogin)return this.isUnidentifiedLimitedLoginSignupMethod();const{userInfo:t}=this.state;return t&&!(t.has_password||t.connected_to_facebook||t.connected_to_google)}isUnidentifiedLimitedLoginSignupMethod(){const{viewer:e}=this.props;return e.isAuth&&e.isLimitedLogin&&!(e.hasPassword||this.isLimitedLoginUserGplusConnected()||this.isLimitedLoginUserFBConnected())}isLimitedLoginUserFBConnected(){const{viewer:e}=this.props;return e.socialNetwork&&e.socialNetwork.facebook&&e.socialNetwork.facebook.connected}isLimitedLoginUserGplusConnected(){const{viewer:e}=this.props;return e.socialNetwork&&e.socialNetwork.gplus&&e.socialNetwork.gplus.connected}renderModalSideImage(e,t=600){const{image_url:i,image_aspect_ratio:n}=e||{},a={height:"100%",width:n*t,maxWidth:400,backgroundSize:"cover",backgroundPosition:"center",backgroundImage:`url(${i})`};return o.a.createElement("div",{style:{borderRadius:"8px 0 0 8px",overflow:"hidden"}},o.a.createElement("div",{style:a}))}renderLoadingIndicator(){return this.state.isLoading?o.a.createElement(O.a,null):null}renderPersonalizedLogin(){const{container:e,darkSignupTitle:t,delayedTitleRender:i,hybridTier:a,isBusiness:s,location:l,passwordValidationError:d,pins:h,viewer:p,type:u}=this.props;let m;const f=Object(ee.j)(l.pathname,{path:"/pin/:id",exact:!0});if(p.isLimitedLogin&&f){const e=f.params.id,t=e&&h[e]&&h[e].images&&h[e].images["474x"];m=t&&{image_url:t.url,image_aspect_ratio:t.width/t.height||0}}const E=c.a._("Not you? Log in with a different account","Short message (in small fonts) on the bottom of the login modal that prompts a user to log in to a different account","Short message (in small fonts) on the bottom of the login modal that prompts a user to log in to a different account"),b=c.a._("Need an account? Sign up now","Short message (in small fonts) on the bottom of the login modal that prompts a users to create an account","Short message (in small fonts) on the bottom of the login modal that prompts a users to create an account"),S=this.state.userInfo?this.state.userInfo.first_name:"",w=Object($.b)(c.a._("Welcome back, {{name}}!","Short title (large font) on the login modal welcoming back a user who previously logged in to Pinterest","Short title (large font) on the login modal welcoming back a user who previously logged in to Pinterest"),{name:S}),_=ne.logoContainer,x={...ne.signupTitleContainer,width:"350px",overflow:"hidden",maxHeight:"130px"},C=o.a.createElement(n.Fragment,null,this.renderLoadingIndicator(),o.a.createElement("div",{style:_},o.a.createElement(M.a,{size:40})),o.a.createElement("div",{style:x},!i&&o.a.createElement(k,{container:e,darkSignupTitle:t,hybridTier:a,modalType:Z.a.personalizedLogin,titleText:w})),p.isAuth&&p.isLimitedLogin&&o.a.createElement(g.c,{marginBottom:4},o.a.createElement(g.K,{align:"center",overflow:"normal"},Object(K.a)())),o.a.createElement("div",{style:ne.profilePic},o.a.createElement(r.a,{src:this.state.userInfo?this.state.userInfo.medium_image_url:"",name:this.state.userInfo?this.state.userInfo.first_name:""})),o.a.createElement(g.c,{marginBottom:3},o.a.createElement(g.K,{align:"center"},this.state.userInfo?this.state.userInfo.email:null)),o.a.createElement(y.a,null,e=>o.a.createElement(P.a,{requestContext:e,container:this.props.container,disablePostSignupNextUrl:!0,email:this.state.userInfo?this.state.userInfo.email:null,loadingIndicatorCallback:this.toggleLoadingIndicator,passwordValidationError:d,inputStyleOverrides:ne.inputFields,nextUrlParam:this.getNextUrlParam(),loginButtonTextOverride:c.a._("Continue"),hideEmailField:!0,hidePasswordField:!!this.state.userInfo&&!this.state.userInfo.has_password&&!this.isUnidentifiedSignupMethod(),hideFacebookButton:!!this.state.userInfo&&!this.state.userInfo.connected_to_facebook&&!this.isUnidentifiedSignupMethod(),hideGoogleButton:!!this.state.userInfo&&!this.state.userInfo.connected_to_google&&!this.isUnidentifiedSignupMethod(),hidePasswordReset:!0,hideTermsOfService:!0,onEmailChange:function(){},onSocialConnectVerified:this.showAdditionalStep(Z.c.socialSignupWithAge),onFBPhoneOnlyConnectVerified:this.showAdditionalStep(Z.c.FBEmailCollection),onLoginWithMfa:this.handleLoginWithMfa.bind(this),onPasswordChange:this.handleDataChange.bind(this,"password"),password:this.state.password,shouldPreventRegister:!0,triggerAccountRecoveryMode:this.handlePreventRegisterFromPersonalizedModal,showResponseMessageModal:u===Z.c.respondMessage?this.props.showResponseMessageModal:void 0})),o.a.createElement(g.c,{paddingY:5},o.a.createElement(g.j,null)),o.a.createElement(g.c,{"data-test-id":"login-switch-account"},o.a.createElement(g.P,{onTouch:this.handleNotYouClick,fullWidth:!1},o.a.createElement(g.K,{align:"center",size:"md",weight:"bold"},o.a.createElement(g.t,{href:"#"},E)))),o.a.createElement(g.c,{marginTop:1,marginBottom:4},o.a.createElement(g.P,{onTouch:s?()=>{Object(J.a)(101,{element:10880})}:this.handleSignupToggleFromPersonalized,fullWidth:!1},o.a.createElement(g.K,{align:"center",size:"md",weight:"bold"},o.a.createElement(g.t,{href:s?this.getNextUrl("/business/create"):"#"},b)))));return m?o.a.createElement("div",{"data-test-id":"login",style:{...ne.personalizedModalContainer,display:"flex",width:"auto",padding:""}},this.renderModalSideImage(m),o.a.createElement("div",{style:{width:400,padding:"22px 0"}},C)):o.a.createElement("div",{"data-test-id":"login",style:ne.personalizedModalContainer},C)}renderEmailAlreadyExistLogin(){const{container:e,darkSignupTitle:t,delayedTitleRender:i,hybridTier:a,isBusiness:s,passwordValidationError:r,type:l}=this.props,d=c.a._("Not you? Log in with a different account","Short message (in small fonts) on the bottom of the login modal that prompts a user to log in to a different account","Short message (in small fonts) on the bottom of the login modal that prompts a user to log in to a different account"),h=c.a._("Need an account? Sign up now","Short message (in small fonts) on the bottom of the login modal that prompts a users to create an account","Short message (in small fonts) on the bottom of the login modal that prompts a users to create an account"),p=this.state.userInfo?this.state.userInfo.first_name:"",u=Object($.b)(c.a._("Looks like you're already on Pinterest","Short title (large font) on the login modal welcoming back a user who previously logged in to Pinterest","Short title (large font) on the login modal welcoming back a user who previously logged in to Pinterest"),{name:p}),m=ne.logoContainer,f={...ne.signupTitleContainer,width:"350px",overflow:"hidden",maxHeight:"120px"},E=o.a.createElement(n.Fragment,null,this.renderLoadingIndicator(),o.a.createElement("div",{style:m},o.a.createElement(M.a,{size:40})),o.a.createElement("div",{style:f},!i&&o.a.createElement(k,{container:e,darkSignupTitle:t,hybridTier:a,modalType:Z.a.personalizedLogin,titleText:u})),o.a.createElement(g.c,{marginBottom:3},o.a.createElement(g.K,{align:"center"},this.state.socialRegistrationCredentials.userData?this.state.socialRegistrationCredentials.userData.email:null)),o.a.createElement(y.a,null,e=>o.a.createElement(P.a,{requestContext:e,container:this.props.container,disablePostSignupNextUrl:!0,email:this.state.socialRegistrationCredentials.userData?this.state.socialRegistrationCredentials.userData.email:null,loadingIndicatorCallback:this.toggleLoadingIndicator,passwordValidationError:r,inputStyleOverrides:ne.inputFields,nextUrlParam:this.getNextUrlParam(),loginButtonTextOverride:c.a._("Continue"),hideEmailField:!0,hideFacebookButton:!0,hidePasswordReset:!0,hideTermsOfService:!0,onEmailChange:function(){},onSocialConnectVerified:this.showAdditionalStep(Z.c.socialSignupWithAge),onFBPhoneOnlyConnectVerified:this.showAdditionalStep(Z.c.FBEmailCollection),onLoginWithMfa:this.handleLoginWithMfa.bind(this),onPasswordChange:this.handleDataChange.bind(this,"password"),password:this.state.password,shouldPreventRegister:!0,triggerAccountRecoveryMode:this.handlePreventRegisterFromPersonalizedModal,showResponseMessageModal:l===Z.c.respondMessage?this.props.showResponseMessageModal:void 0})),o.a.createElement(g.c,{paddingY:5},o.a.createElement(g.j,null)),o.a.createElement(g.c,{"data-test-id":"login-switch-account"},o.a.createElement(g.P,{onTouch:this.handleNotYouClick,fullWidth:!1},o.a.createElement(g.K,{align:"center",size:"md",weight:"bold"},o.a.createElement(g.t,{href:"#"},d)))),o.a.createElement(g.c,{marginTop:1,marginBottom:4},o.a.createElement(g.P,{onTouch:s?()=>{Object(J.a)(101,{element:10880})}:this.handleSignupToggleFromPersonalized,fullWidth:!1},o.a.createElement(g.K,{align:"center",size:"md",weight:"bold"},o.a.createElement(g.t,{href:s?this.getNextUrl("/business/create"):"#"},h)))));return o.a.createElement("div",{"data-test-id":"login",style:ne.personalizedModalContainer},E)}renderSignupToLoginToggle(){return o.a.createElement(U,{buttonText:c.a._("Already a member? Log in","Toggle to switch from the sign up modal to the login modal ","Toggle to switch from the sign up modal to the login modal "),link:"/login/",onClick:this.handleLoginToggleButtonClick,titleStylesOverride:ne.signupLoginToggle,useSmallButton:!0})}renderDefaultSignup(){const{container:e,darkSignupTitle:t,delayedTitleRender:i,emailValidationError:a,passwordValidationError:s,signupSource:r,viewer:l,renderBusinessCreateButton:d,inviter:p,hybridTier:u,type:m}=this.props,{age:f,email:E,gender:b,isExitingUserInSignup:S,name:w,password:y}=this.state;let _=this.props.customSignupTagline||(r?this.tagline(this.state.type,r):this.tagline(this.state.type,Z.b.defaultSource));S&&(_=c.a._("Welcome back to Pinterest!","welcoming user back to pinterest in signup modal when we recognize their email","welcoming user back to pinterest in signup modal when we recognize their email"));const x={...this.getSignupStyles(),width:"484px",..."home_page"===e?{paddingBottom:55}:null},C=ne.signupForm,v=ne.logoContainer;let T=ne.signupTitleContainer;"login_page"!==e&&(T={...T,width:"400px"});const L=ne.signupTitleContainer,O=ne.signupSubtitles;let P=o.a.createElement("div",null,o.a.createElement(V,{css:ne.separator}),o.a.createElement("div",null,this.renderSignupToLoginToggle()));const R={marginTop:"32px"};this.props.toggleType===Y.a.NOT_NOW_BUTTON?P=o.a.createElement("div",null,o.a.createElement("div",{style:R},this.renderSignupToLoginToggle()),o.a.createElement("div",null,o.a.createElement("div",{style:ne.businessContainer},o.a.createElement("h5",{style:ne.businessHeader},c.a._("Are you a business? ")),o.a.createElement("a",{href:ie,style:ne.businessLink,target:"_blank",onClick:()=>{Object(h.a)("unauth.business_link.click"),l.isAuth?Object(J.a)(101,{component:13096,element:10281,login_state:l.isLimitedLogin?2:1}):Object(J.a)(101,{component:13096,element:10281})}},c.a._("Get started here"))))):"home_page"===e&&(P=o.a.createElement(g.c,{marginTop:3},this.renderSignupToLoginToggle()));let F=48;r===Z.b.homePage&&(F=50);const A=this.valuePropAsTitle(),I=!!p&&!p.is_default_image,B=o.a.createElement(n.Fragment,null,o.a.createElement("div",{style:v},o.a.createElement(M.a,{size:F})),o.a.createElement("div",{style:T},!i&&o.a.createElement(k,{container:e,hybridTier:u,darkSignupTitle:t,modalType:Z.a.signup,titleText:["login_page","home_page"].includes(e)?_:A})),o.a.createElement("div",{style:L},!this.state.isExitingUserInSignup&&o.a.createElement("h3",{style:O},"login_page"!==e&&"home_page"!==e?_:this.valuePropAsSubtitle(r)))),j=o.a.createElement(n.Fragment,null,this.renderLoadingIndicator(),o.a.createElement("div",{style:I?ne.signupInviteForm:C},this.renderSocialSignupModalText(I,B,T),o.a.createElement(N.a,{additionalEmailPasswordChildren:P,age:f,container:this.props.container,dark:!0,disablePostSignupNextUrl:!0,email:E,emailValidationError:a,loadingIndicatorCallback:this.toggleLoadingIndicator,passwordValidationError:s,gender:b,setWelcomeBackMessageForExistingEmail:this.setWelcomeBackMessageForExistingEmail,name:w,nextUrlParam:this.props.postSignupUrlParam||this.getNextUrlParam(),onAgeChange:this.handleDataChange.bind(this,"age"),onEmailChange:this.handleDataChange.bind(this,"email"),onFBPhoneOnlyConnectVerified:this.showAdditionalStep(Z.c.FBEmailCollection),onFBEmailDeniedPerm:this.showAdditionalStep(Z.c.FBEmailRerequest),onSocialConnectVerified:this.showAdditionalStep(Z.c.socialSignupWithAge),onGenderChange:this.handleDataChange.bind(this,"gender"),onLoginWithMfa:this.handleLoginWithMfa.bind(this),onNameChange:this.handleDataChange.bind(this,"name"),onPasswordChange:this.handleDataChange.bind(this,"password"),onStepChange:this.changeStep.bind(this),onShowRegisterForm:this.handleShowRegisterForm,setNameFromEmail:this.setNameFromEmail.bind(this),signupSource:r,showSignupWelcomeLoadingFn:this.showSignupWelcomeLoadingFn,password:y,clearPassword:this.clearPassword,showResponseMessageModal:m===Z.c.respondMessage?this.props.showResponseMessageModal:void 0})),d&&d());return o.a.createElement("div",{"data-test-id":"signup",style:x},j)}renderLoginToSignupToggle(e){return o.a.createElement(U,{buttonText:c.a._("Not on Pinterest yet? Sign up","Toggle to switch from the login modal to the sign up modal","Toggle to switch from the login modal to the sign up modal"),link:e,onClick:this.handleSignupToggleButtonClick,titleStylesOverride:ne.signupLoginToggle,useSmallButton:!0})}renderDefaultLogin(){const{container:e,customLoginTagline:t,darkSignupTitle:i,delayedTitleRender:a,emailValidationError:s,isAccountSwitch:r,hideAccountSwitchValueProp:l,magicLinkGroup:d,passwordValidationError:h,signupSource:g,renderBusinessCreateButton:p,hybridTier:u,type:m}=this.props,f=t||(g?this.tagline(this.state.type,g):this.tagline(this.state.type,Z.b.login)),E=ne.logoContainer;let b=ne.signupTitleContainer;"login_page"!==e&&(b={...b,width:"400px"});let S=40;g===Z.b.homePage&&(S=50);const w={...this.getSignupStyles(),width:"484px"},_=ne.signupForm,x=ne.signupTitleContainer,C=ne.signupSubtitles,v={...ne.separator,marginLeft:"-10px"};let T=o.a.createElement("div",null,o.a.createElement(V,{css:v}),o.a.createElement("div",null,this.renderLoginToSignupToggle("/signup/")));this.props.isBusiness?T=o.a.createElement("div",null,o.a.createElement(V,{css:{margin:"10px auto"}}),o.a.createElement("a",{href:this.getNextUrl("/business/create")},c.a._("Create new account","Link to the page to create a new business account instead of logging in","Link to the page to create a new business account instead of logging in")),o.a.createElement("div",null)):this.props.toggleType===Y.a.NOT_NOW_BUTTON?T=o.a.createElement("div",null,o.a.createElement(V,{css:{margin:"10px auto"}}),o.a.createElement("div",{style:ne.haveAccountText},this.renderLoginToSignupToggle()),o.a.createElement("div",null)):this.props.toggleType===Y.a.NO_TOGGLE||r?T=null:this.props.toggleType===Y.a.SMALL_TOGGLE&&(T=o.a.createElement("div",null,o.a.createElement(V,{css:{margin:"10px auto"}}),this.renderLoginToSignupToggle(),o.a.createElement("div",null)));const L=c.a._("Have another Pinterest account? Log in to easily switch between them","Subtitle on the login modal that explains to a user why they would add an additional account to their profile","Subtitle on the login modal that explains to a user why they would add an additional account to their profile"),O=o.a.createElement(n.Fragment,null,this.renderLoadingIndicator(),o.a.createElement("div",{style:_},o.a.createElement("div",{style:E},o.a.createElement(M.a,{size:S})),o.a.createElement("div",{style:b},!a&&o.a.createElement(k,{container:e,hybridTier:u,darkSignupTitle:i,modalType:Z.a.login,titleText:f})),r&&!l&&o.a.createElement("div",{style:x},o.a.createElement("h3",{style:C},L)),o.a.createElement(y.a,null,e=>o.a.createElement(P.a,{requestContext:e,container:this.props.container,disablePostSignupNextUrl:!0,email:this.state.email,emailValidationError:s,loadingIndicatorCallback:this.toggleLoadingIndicator,passwordValidationError:h,inputStyleOverrides:ne.inputFields,isAccountSwitch:r,magicLinkGroup:d,nextUrlParam:this.getNextUrlParam(),onEmailChange:this.handleDataChange.bind(this,"email"),onSocialConnectVerified:this.showAdditionalStep(Z.c.socialSignupWithAge),onFBPhoneOnlyConnectVerified:this.showAdditionalStep(Z.c.FBEmailCollection),onLoginWithMfa:this.handleLoginWithMfa.bind(this),onPasswordChange:this.handleDataChange.bind(this,"password"),password:this.state.password,toggleMagicLinkConfirmation:this.toggleMagicLinkConfirmation,clearPassword:this.clearPassword,showResponseMessageModal:m===Z.c.respondMessage?this.props.showResponseMessageModal:void 0})),T),!1);return o.a.createElement("div",{"data-test-id":"login",style:w},O)}renderLoginMfa(){const{container:e,darkSignupTitle:t,delayedTitleRender:i,hybridTier:n}=this.props,a=this.tagline(this.state.type,Z.b.loginMfa),s=this.getSignupStyles(),r=ne.signupForm,l=ne.logoContainer;return o.a.createElement("div",{"data-test-id":"login",style:s},o.a.createElement("div",{style:r},o.a.createElement("div",{style:l},o.a.createElement(M.a,{size:40})),o.a.createElement("div",{style:{...ne.signupTitleContainer,...ne.signupTitleMfaContainer}},!i&&o.a.createElement(k,{container:e,darkSignupTitle:t,hybridTier:n,modalType:Z.a.loginMfa,titleText:a})),o.a.createElement(R.a,{container:this.props.container,code:this.state.mfaCode,creds:this.state.mfaCreds,email:this.state.email,inputStyleOverrides:ne.inputFields,isAccountSwitch:this.props.isAccountSwitch,nextUrlParam:this.getNextUrlParam(),onCodeChange:this.handleDataChange.bind(this,"mfaCode"),password:this.state.password,phoneNumberEnd:this.state.mfaPhoneNumberEnd})))}renderMagicLinkConfirmation(){const{email:e,password:t}=this.state;return Object(Q.a)("confirmation_shown",e,t),o.a.createElement("div",{"data-test-id":"login",style:this.getSignupStyles()},o.a.createElement("div",{style:ne.signupForm},o.a.createElement("div",{style:ne.logoContainer},o.a.createElement(M.a,{size:40})),o.a.createElement("div",{style:ne.signupTitleContainer},o.a.createElement("h3",{style:ne.signupTitle},c.a._("Check your email","title on login modal telling user to check their email","title on login modal telling user to check their email"))),o.a.createElement(g.c,{direction:"column",alignItems:"center",display:"flex"},o.a.createElement(g.c,{paddingY:3,width:270},o.a.createElement(g.K,null,o.a.createElement("span",{dangerouslySetInnerHTML:{__html:s.c(c.a._("We just sent an email to you at <strong>{{ email }}</strong>. It has a magic link that you can use to log in.","Message on login modal telling users an email has been sent to them containing a link to log in","Message on login modal telling users an email has been sent to them containing a link to log in"),{email:e})}}))),o.a.createElement(g.c,{paddingY:3,width:270},o.a.createElement(g.d,{text:c.a._("Back","text on button to return to login modal from magic link confirmation screen","text on button to return to login modal from magic link confirmation screen"),onClick:()=>{Object(Q.a)("confirmation_dismissed",e,t),this.toggleMagicLinkConfirmation(!1)}})))))}renderSocialSignupWithAge(){const{socialRegistrationCredentials:e}=this.state,{type:t}=this.props,i=c.a._("Sign up to see more","Age collection signup step for Facebook/G+ authentication","Age collection signup step for Facebook/G+ authentication");return o.a.createElement("div",{"data-test-id":"login",style:this.getSignupBoxStyle()},this.renderLoadingIndicator(),o.a.createElement("div",{style:ne.signupForm},o.a.createElement("div",{style:ne.logoContainer},o.a.createElement(M.a,{size:40})),o.a.createElement("div",{style:ne.signupTitleContainer},o.a.createElement("h3",{style:ne.signupTitle},i)),o.a.createElement(z.a,{container:this.props.container,disablePostSignupNextUrl:!0,loadingIndicatorCallback:this.toggleLoadingIndicator,nextUrlParam:this.getNextUrlParam(),registrationCredentials:e,showSignupWelcomeLoadingFn:this.showSignupWelcomeLoadingFn,showResponseMessageModal:t===Z.c.respondMessage?this.props.showResponseMessageModal:void 0})),o.a.createElement(g.c,{margin:4},o.a.createElement(g.j,null),o.a.createElement(g.c,{padding:3},this.renderSignupToLoginToggle())))}renderFBEmailCollection(){const{socialRegistrationCredentials:e}=this.state,{nextUrlParam:t,requestContext:{seoUnauthExperiments:i}}=this.props,n={...ne.signup,minHeight:"400px"},a={...ne.signupTitleContainer,width:"310px"};c.a._("What's your email address?","email collection step for Facebook phone only sign up","email collection step for Facebook phone only sign up");const s=c.a._("What's your email address?","Prompt for email address in after sign in with apple","Prompt for email address in after sign in with apple");return o.a.createElement("div",{"data-test-id":"login",style:n},this.renderLoadingIndicator(),o.a.createElement("div",{style:ne.signupForm},o.a.createElement("div",{style:ne.logoContainer},o.a.createElement(M.a,{size:40})),o.a.createElement("div",{style:a},o.a.createElement("h3",{style:ne.signupTitle},s)),o.a.createElement(v,{nextUrlParam:t,loadingIndicatorCallback:this.toggleLoadingIndicator,showEmailConfirmationStep:this.showAdditionalStep(Z.c.emailConfirmation),showEmailAlreadyExistModal:this.showAdditionalStep(Z.c.FBEmailAlreadyExist),showLoginStep:this.showAdditionalStep(Z.c.login),showSocialSignupWithAgeStep:this.showAdditionalStep(Z.c.socialSignupWithAge),registrationCredentials:e,seoUnauthExperiments:i,onNotNowClick:this.handleNotNowClick})))}renderFBEmailRerequestForm(){const{type:e}=this.props,t={...this.getSignupBoxStyle(),minHeight:"400px"},i={...ne.signupTitleContainer,width:"320px"},n=c.a._("Add your email to finish","Tagline on facebook rerequest form","Tagline on facebook rerequest form"),a={...ne.signupSubtitles,marginTop:"24px"},s={...ne.notNowButton,marginTop:"90px"},r=c.a._("We need your email address to complete this signup. Click the button below, and we can use the email associated with your Facebook account.","message to explain reauth step beneath the tagline","message to explain reauth step beneath the tagline");return o.a.createElement("div",{"data-test-id":"login",style:t},this.renderLoadingIndicator(),o.a.createElement("div",{style:ne.signupForm},o.a.createElement("div",{style:ne.logoContainer},o.a.createElement(M.a,{size:40})),o.a.createElement("div",{style:i},o.a.createElement("h3",{style:ne.signupTitle},n),o.a.createElement("h3",{style:a},r),o.a.createElement("div",{style:{width:"260px",margin:"auto"}},o.a.createElement(d.b,{isRerequest:!0,container:"FBEmailRerequest",buttonText:c.a._("Continue with Facebook","Button text on facebook connect button on FB email reauth form","Button text on facebook connect button on FB email reauth form"),loadingIndicatorCallback:this.toggleLoadingIndicator,useGestaltTooltip:!0,handlePostConnectClick:this.handlePostConnectClick,handlePostSuccessConnect:this.handlePostSuccessConnect,showResponseMessageModal:e===Z.c.respondMessage?this.props.showResponseMessageModal:void 0}))),o.a.createElement(l.a,{className:"lightGrey",onClick:this.handleNotNowClick,styleOverrides:s},c.a._("Not now","word on not now button to dismiss the FB email reauth form","word on not now button to dismiss the FB email reauth form"))))}renderEmailConfirmation(){const{socialRegistrationCredentials:e}=this.state,t=e.userData.email,i=c.a._("Check your email","email confirmation tagline for Facebook cellphone only sign up","email confirmation tagline for Facebook cellphone only sign up"),n=c.a._("We've sent a confirmation email to ","email confirmation message for Facebook cellphone only sign up","email confirmation message for Facebook cellphone only sign up"),a={...ne.signupSubtitles,marginTop:"24px"};return o.a.createElement("div",{"data-test-id":"login",style:this.getSignupBoxStyle()},o.a.createElement("div",{style:ne.signupForm},o.a.createElement("div",{style:ne.logoContainer},o.a.createElement(M.a,{size:40})),o.a.createElement("div",{style:ne.signupTitleContainer},o.a.createElement("h3",{style:ne.signupTitle},i),o.a.createElement("h3",{style:a},n,t)),o.a.createElement(l.a,{className:"red",onClick:this.handleConfirmationPageButtonClick,styleOverrides:ne.onClickEmailConfirmationButton},c.a._("Done","word on the button in email confirmation page","word on the button in email confirmation page"))))}render(){const{isAccountSwitch:e,isPersonalizedModal:t,showSignupWelcomeLoading:i,type:n}=this.state,{viewer:a}=this.props;return n===Z.c.signupOrPersonalizedLogin?t&&!e?this.renderPersonalizedLogin():this.renderDefaultSignup():n===Z.c.signup?i?o.a.createElement(D.a,null):this.renderDefaultSignup():n===Z.c.login?i?o.a.createElement(D.a,null):!t||e||a.isAuth&&!a.isLimitedLogin?this.renderDefaultLogin():this.renderPersonalizedLogin():n===Z.c.loginMfa?this.renderLoginMfa():n===Z.c.socialSignupWithAge?i?o.a.createElement(D.a,null):this.renderSocialSignupWithAge():n===Z.c.FBEmailRerequest?this.renderFBEmailRerequestForm():n===Z.c.emailConfirmation?this.renderEmailConfirmation():n===Z.c.magicLinkConfirmation?this.renderMagicLinkConfirmation():n===Z.c.respondMessage?this.renderDefaultSignup():this.state.type===Z.c.FBEmailCollection?this.renderFBEmailCollection():this.state.type===Z.c.FBEmailAlreadyExist?this.renderEmailAlreadyExistLogin():null}}te(oe,"defaultProps",{disablePersonalizedLoginActivation:!1,isAccountSwitch:!1,signupSource:Z.b.defaultSource,toggleType:Y.a.DEFAULT_TOGGLE,type:Z.c.signup});oe.contextTypes={isBot:I.a.bool,logging:I.a.shape({viewParameter:I.a.number,viewType:I.a.number.isRequired}),locale:I.a.string};t.default=Object(H.compose)(y.e,Object(a.connect)(e=>({location:e.location,pins:e.pins||{},userInfo:e.loggedOutUserInfo&&e.loggedOutUserInfo.userInfo?e.loggedOutUserInfo.userInfo:{},viewer:e.viewer,eligibleExperiences:e.experiences?e.experiences.eligibleExperiences:{}})))(oe)},qrz1:function(e,t,i){var n=i("q1tI"),o=i.n(n),a=i("pz/u"),s=i("Ye/N"),r=i("x/Ro"),l=i("NSVK"),d=i("17x9"),c=i.n(d),h=i("inSI"),g=i("kmwA"),p=i("mt4P"),u=i("28DW"),m=i("vvax"),f=i("IRjL"),E=i("c50B");const b=g.a.settings.PASSWORD_RESET_URL,S={loginForm:{borderTop:"solid 1px #ccc",minHeight:"350px",padding:"20px 10px"},loginText:{fontSize:"14px",margin:"24px 0",textAlign:"left"},loginTitleContainer:{margin:"0 auto 25px"},loginTitle:{fontSize:"28px",fontWeight:"bold",letterSpacing:"-1px"},loginContainer:{margin:"0 auto",marginTop:"45px",width:"268px"},loginFooterContainer:{marginTop:"15px",color:"#333"},signupButton:{width:"100%"}},w="loginmfa";class y extends n.Component{constructor(e){super(e),this.state={codeValidationError:null,loading:!1},this.codeValidators=[Object(E.n)({message:s.a._("You missed a spot! Don't forget to add your verification code.")}),Object(E.l)({message:s.a._("Hmm...that doesn't look like a verification code.")})]}componentDidMount(){!this.props.isAccountSwitch&&l.c.isFullyLoggedIn(this.context.isAuthenticated,this.context.loginState)&&l.c.handleRedirect(this.props.nextUrlParam)}_getLocationForLoginRedirect(){const e=window.location.pathname!==b?window.location.pathname:"/";return this.props.nextUrlParam||e}handleButtonClick(e){const t=Object(h.a)(this.props.code,this.codeValidators);t?(this.setState({codeValidationError:t}),Object(u.a)(`unauth.login.error.CLIENT_ERROR.wrongcode.${w}`)):(this.setState({codeValidationError:null}),this.loginUser())}handleResendCode(e){e.preventDefault(),this.setState({loading:!0});let t=this.props.creds;t?t.mfa_resend=!0:t={mfa_resend:!0,username_or_email:this.props.email,password:this.props.password};const i={container:this.props.container,hybridTier:this.context.hybridTier,page:this.context.pageType};Object(r.a)(t,i).then(()=>{this.setState({loading:!1})},e=>{this.setState({loading:!1}),e.message?this.setState({codeValidationError:e.message}):Object(f.a)(s.a._("Sorry! Something went wrong on our end."))})}loginUser(e){this.setState({loading:!0});let t=e||this.props.creds;t?t.mfa_token=this.props.code:t={mfa_token:this.props.code,username_or_email:this.props.email,password:this.props.password};const i={container:this.props.container,hybridTier:this.context.hybridTier,page:this.context.pageType};Object(r.a)(t,i).then(()=>{l.c.handleRedirect(this._getLocationForLoginRedirect())},e=>{e.message?this.setState({codeValidationError:e.message,loading:!1}):(Object(f.a)(s.a._("Sorry! Something went wrong on our end.")),this.setState({loading:!1}))})}render(){const e=S.loginContainer,t=s.a._("Continue"),i=this.props.phoneNumberEnd,n=i?Object(m.b)(s.a._("Please check your phone with the number ending in {{ phoneNumberEnd }} for a code and enter it in the field below to log in."),{phoneNumberEnd:o.a.createElement("strong",{key:"phone"},i)}):s.a._("Please check your phone for a code and enter it in the field below to log in.");return o.a.createElement("div",{style:e},o.a.createElement("p",{style:S.loginText},n),o.a.createElement("form",{method:"POST",noValidate:!0,onSubmit:e=>{e.preventDefault(),this.handleButtonClick(e)}},o.a.createElement(p.a,{autoComplete:"off",focused:!0,hasError:!!this.state.codeValidationError,id:"mfaCode",inputStyleOverrides:this.props.inputStyleOverrides,name:"code",onChange:this.props.onCodeChange,placeholder:s.a._("Verification code"),tooltip:this.state.codeValidationError,type:"text",value:this.props.code}),o.a.createElement(a.a,{accessibilityLabel:t,className:"red SignupButton",loading:this.state.loading,styleOverrides:S.signupButton,type:"submit"},o.a.createElement("div",null,t))),o.a.createElement("div",{style:S.loginFooterContainer},Object(m.b)(s.a._("If you didn't get it, we can {{ resendCode }}."),{resendCode:o.a.createElement("a",{onClick:this.handleResendCode.bind(this),href:"",key:"code"},s.a._("resend the code"))})))}}var _,x,C;C={container:"unknown"},(x="defaultProps")in(_=y)?Object.defineProperty(_,x,{value:C,enumerable:!0,configurable:!0,writable:!0}):_[x]=C,y.contextTypes={isAuthenticated:c.a.bool.isRequired,loginState:c.a.number,hybridTier:c.a.string,pageType:c.a.string},t.a=y},rvlh:function(e,t,i){var n=i("q1tI"),o=i.n(n),a=i("/MKj"),s=i("gxu6"),r=i("kL1e"),l=i("pz/u"),d=i("JW66"),c=i("N9+J"),h=i("D8pe"),g=i("Ye/N"),p=i("EVO9"),u=i("x/Ro"),m=i("17x9"),f=i.n(m),E=i("DtEZ"),b=i("eOdZ"),S=i("inSI"),w=i("H3gn"),y=i("i7x9"),_=i("DrcS"),x=i("a0jO"),C=i("fArA"),v=i("IRjL"),T=i("/5zs"),L=i("U4JR"),k=i("a2Qh"),O=i("NSVK"),P=i("28DW"),R=i("jsIX"),M=i("VL22"),F=i("pLLR");function A(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const I={signUpButton:{padding:"1px",textAlign:"center",display:"block",transition:"opacity .2s linear",position:"relative",outline:"none",fontSize:"16px",width:"100%",height:"40px",cursor:"pointer",fontFamily:'-apple-system, system-ui, "Segoe',letterSpacing:"-0.4px",color:"white",backgroundColor:"#e60023",borderRadius:"4px"},emailButtonStyles:{height:"40px",width:"100%",borderRadius:"2px"},emailButtonTextStyles:{fontFamily:x.a,textAlign:"center",fontSize:"15px",WebkitFontSmoothing:"auto"},spaceBetweenTextAndSocial:{height:"11px"},signupContainer:{margin:"0 auto",width:"268px"},socialButtonContainer:{marginTop:"10px"},socialButtonSeparator:{height:"10px"}},B="emailpwdstep";class V extends n.Component{constructor(e,t){super(e,t),A(this,"onLoginWithSuspended",()=>{const{loadingIndicatorCallback:e}=this.props;e(!1),this.setState({accountRecoveryModalType:k.a[d.a.POLICY_VIOLATION_USER]})}),A(this,"onLoginWithVoluntarilyDeactivated",e=>{this.setState({googleValidationError:e.message})}),A(this,"setLoadingState",e=>{const{loadingIndicatorCallback:t,showSignupWelcomeLoadingFn:i}=this.props;return i&&!1===e&&i(!1),t(e)}),A(this,"handleButtonClick",e=>{"1"!==s.a("r_r")?(this.setState({facebookValidationError:null,googleValidationError:null}),this.handleEmailSignUp(e)):this.showUnderAgeError()}),A(this,"handleEmailChange",e=>{this.props.onEmailChange&&this.props.onEmailChange(e)}),A(this,"handleTypoSuggestionClick",()=>{this.setState({emailValidationError:""})}),A(this,"handlePasswordChange",e=>{this.state.passwordValidationError&&this.setState({passwordValidationError:null}),this.props.onPasswordChange&&this.props.onPasswordChange(e)}),A(this,"handleEmailSignUp",e=>{Object(P.a)("unauth_email_validation_attempt");let t=Object(S.a)(this.props.email,this.emailValidators);if(t)this.setState({emailValidationError:t}),Object(P.a)(`unauth.login.error.CLIENT_ERROR.malformemail.${B}`);else{t=Object(S.a)(this.props.password,this.loginPasswordValidators);const i=Object(S.a)(this.props.password,this.asciiValidators);t?(this.setState({passwordValidationError:t}),Object(P.a)(`unauth.login.error.CLIENT_ERROR.malformpwd.${B}`)):i?(this.setState({passwordValidationError:i}),Object(P.a)(`unauth.login.error.CLIENT_ERROR.malformpwd.${B}`),Object(P.a)(`unauth.login.error.CLIENT_ERROR.nonasciipwd.${B}`)):(this.setState({passwordValidationError:null}),this.validateEmailAvailable(e)),this.setState({emailValidationError:null}),this.props.setNameFromEmail&&this.props.setNameFromEmail()}}),A(this,"register",()=>{this.setLoadingState(!0);const{age:e,container:t,email:i,name:n,password:o,signupSource:a}=this.props,r={container:t,email:i,password:o,age:e,country:this.context.country,signupSource:a,first_name:n,last_name:"",hybridTier:this.context.hybridTier,page:this.context.pageType,recapToken:this.props.recaptchaTokenV3||"default"};Object(P.a)("one_step_age_signup_complete"),_.a.register(r).then(this.handleSignupSuccess,e=>{this.contextLogSignupLoginEvent(7488),this.setLoadingState(!1),this.props.refreshRecaptchaTokenV3&&this.props.refreshRecaptchaTokenV3(),e.api_error_code===d.a.API_ERROR_UNDERAGE_REGISTER_ATTEMPT?(s.b("r_r","1"),this.showUnderAgeError()):e.api_error_code===d.a.SIGNUP_INVALID_EMAIL?(Object(P.a)("unauth_show_invalid_email_inline_error"),this.setState({emailValidationError:g.a._("Your email is invalid.")})):Object(v.a)(g.a._("Sorry! Something went wrong on our end."))}),this.contextLogSignupLoginEvent(7537)}),A(this,"handleSignupSuccess",()=>{const{showResponseMessageModal:e}=this.props;this.contextLogSignupLoginEvent(7487),Object(P.a)("unauth.signup_one_step.completed"),e?e(!0):O.c.handleSignupRedirect(this.props.nextUrlParam,this.props.disablePostSignupNextUrl)}),A(this,"shouldRequireAge",()=>{const{country:e}=this.context;return Object(M.d)(e)||Object(M.c)(e)}),A(this,"validateAgeRequirement",()=>{let e=!1;return this.shouldRequireAge()&&(e=Object(S.a)(this.props.age||"",this.ageValidators))&&(this.setState({ageValidationError:e}),this.setLoadingState(!1),Object(P.a)(`unauth.login.error.CLIENT_ERROR.invalidage.${B}`)),e}),A(this,"validatePasswordRequirement",()=>{const e=Object(S.a)(this.props.password,this.passwordValidators);return e&&(this.setState({passwordValidationError:e}),this.setLoadingState(!1),Object(P.a)(`unauth.login.error.CLIENT_ERROR.malformpwd.${B}`)),e}),A(this,"completeRegistration",e=>{this.setState({emailValidationError:null}),this.setLoadingState(!1),Object(P.a)("unauth.signup_step_1.completed"),this.register()}),A(this,"checkEmailExistsWithCompletion",(e,t,i)=>{b.a.create("EmailExistsResource",{email:e}).callGet({emailValidationError:!1}).then(e=>{this.setState({emailValidationError:null}),!1===e.resource_response.data?i():t()},()=>{const e=g.a._("Hmm...that doesn't look like an email address");this.setState({emailValidationError:e})})}),A(this,"updateAccountRecoveryModal",e=>this.setState({accountRecoveryModalType:e})),A(this,"handleSignupWithEmailClick",()=>{Object(P.a)("unauth_signup_email_btn_click"),Object(P.d)("signup_email_button"),this.setState({showRegisterForm:!0}),this.props.onShowRegisterForm&&this.props.onShowRegisterForm()}),A(this,"renderSocialButtons",()=>{const{sm:e}=this.props,t=o.a.createElement(c.b,{buttonText:g.a._("Continue with Facebook"),container:this.props.container,disablePostSignupNextUrl:this.props.disablePostSignupNextUrl,onSocialConnectVerified:this.props.onSocialConnectVerified,onFBEmailDeniedPerm:this.props.onFBEmailDeniedPerm,onFBPhoneOnlyConnectVerified:this.props.onFBPhoneOnlyConnectVerified,loadingIndicatorCallback:this.props.loadingIndicatorCallback,onLoginWithMfa:this.props.onLoginWithMfa,onLoginWithSuspended:this.onLoginWithSuspended,showSignupWelcomeLoadingFn:this.props.showSignupWelcomeLoadingFn,tooltip:this.state.facebookValidationError,useGestaltTooltip:!0,showResponseMessageModal:this.props.showResponseMessageModal}),i=o.a.createElement("div",{ref:e=>{this.googleButton=e}},"1"!==e&&o.a.createElement(h.b,{action:"signup",container:this.props.container,disablePostSignupNextUrl:this.props.disablePostSignupNextUrl,nextUrlParam:"/",onSocialConnectVerified:this.props.onSocialConnectVerified,onLoginWithMfa:this.props.onLoginWithMfa,onLoginWithSuspended:this.onLoginWithSuspended,onLoginWithVoluntarilyDeactivated:this.onLoginWithVoluntarilyDeactivated,showSignupWelcomeLoadingFn:this.props.showSignupWelcomeLoadingFn,tooltip:this.state.googleValidationError,showResponseMessageModal:this.props.showResponseMessageModal}));return o.a.createElement("div",{style:I.socialButtonContainer},t,o.a.createElement("div",{style:I.socialButtonSeparator}),i)}),A(this,"renderSignupForm",()=>{const{age:e,email:t,inputStyleOverrides:i,newEmail:n,onAgeChange:a,password:s,suppressFocus:r,updateEmail:d}=this.props,c=new T.c(this.props.requestContext,"mweb_web_unauth_lego_button").enabled()?{...I.signUpButton,borderRadius:"20px"}:I.signUpButton;return this.state.showRegisterForm?o.a.createElement(E.a,{age:e,ageValidationError:this.state.ageValidationError,buttonText:this.getButtonText(),buttonTextLabel:g.a._("Continue creating your Pinterest account","Accessiblity button text to continue creating an account","Accessiblity button text to continue creating an account"),checkEmailExistsWithCompletion:this.checkEmailExistsWithCompletion,email:t,emailFieldHasError:this.state.emailFieldHasError,emailText:g.a._("Email","Text on button asking for email","Text on button asking for email"),emailLabel:g.a._("Continue with email","Sign up button","Sign up button"),emailValidationError:this.state.emailValidationError,onTypoSuggestionClick:this.handleTypoSuggestionClick,inputStyleOverrides:i,newEmail:n,onAgeChange:a,onButtonClick:this.handleButtonClick.bind(this),onEmailChange:this.handleEmailChange,onPasswordChange:this.handlePasswordChange,password:s,passwordText:g.a._("Create a password","Text asking the user to create a password while registering","Text asking the user to create a password while registering"),passwordValidationError:this.state.passwordValidationError,showAgeInput:!0,suppressFocus:r,updateEmail:d,isSignupForm:!0}):o.a.createElement("div",{"data-test-id":"emailSignUpButton"},o.a.createElement(l.a,{className:"EmailSignupButton",styleOverrides:c,onClick:this.handleSignupWithEmailClick},o.a.createElement("div",null,g.a._("Continue with email","Text on the sign up button for signing up with email","Text on the sign up button for signing up with email"))))}),A(this,"renderReorderedButtons",()=>{const{signupSeparatorContinuous:e}=this.props;return o.a.createElement("div",null,this.renderSocialButtons(),this.state.showRegisterForm?o.a.createElement("div",{style:{marginBottom:"10px"}},o.a.createElement(r.a,{signupSeparatorContinuous:e})):null,this.renderSignupForm())}),A(this,"renderSocialButtonsOnly",()=>{this.renderSocialButtons()}),A(this,"renderOriginalForm",()=>{const{signupSeparatorContinuous:e}=this.props;return o.a.createElement("div",null,this.renderSignupForm(),this.state.showRegisterForm?o.a.createElement(r.a,{signupSeparatorContinuous:e}):null,this.renderSocialButtons())}),A(this,"renderButtons",()=>{const{sm:e}=this.props;return"2"===e?this.renderReorderedButtons():"1"===e?this.renderSocialButtonsOnly():this.renderOriginalForm()}),A(this,"showUnderAgeError",()=>{this.setState({ageValidationError:g.a._("Sorry, you can't sign up yet. You’re not old enough to use Pinterest yet.","Error message when under age user trying to register","Error message when under age user trying to register")})}),this.state={ageValidationError:e.ageValidationError||null,accountRecoveryModalType:null,emailFieldHasError:!1,emailValidationError:e.emailValidationError||null,facebookValidationError:null,googleValidationError:null,passwordValidationError:e.passwordValidationError||null,showRegisterForm:"home_page"===this.props.container},this.emailValidators=[Object(R.h)({message:g.a._("You missed a spot! Don't forget to add your email.")}),Object(R.c)({message:g.a._("Hmm...that doesn't look like an email address.")})];const i=g.a._("Your password is too short! You need 6+ characters."),n=g.a._("Passwords can only include alphabet letters, numbers, and common punctuation characters.","Only ASCII characters are allowed for password","Only ASCII characters are allowed for password"),a=g.a._("Help us protect you by providing your age","Error message shown when user did not fill the age field in the sign up model","Error message shown when user did not fill the age field in the sign up model");this.passwordValidators=[Object(R.h)({message:i}),Object(R.f)({shortPassStr:i,samePasswordStr:g.a._("Please make your username and password different."),blackPassStr:g.a._("Please make a stronger password.")})],this.asciiValidators=[Object(R.b)({message:n})],this.loginPasswordValidators=[Object(R.h)({message:i}),Object(R.b)({message:n}),Object(R.e)({messages:{min:i},min:6})],this.shouldRequireAge()?this.ageValidators=[Object(R.h)({message:a}),Object(R.a)({message:g.a._("Please enter a valid number.")})]:this.ageValidators=[Object(R.a)({message:g.a._("Please enter a valid number.")})]}UNSAFE_componentWillReceiveProps(e){const{ageValidationError:t,emailValidationError:i,passwordValidationError:n}=e;let o={};i!==this.props.emailValidationError?o={emailValidationError:i}:n!==this.props.passwordValidationError?o={passwordValidationError:n}:t!==this.props.ageValidationError&&(o={ageValidationError:t}),this.setState(o)}getButtonText(){return g.a._("Continue","Continue button on web","Continue button on web")}handleBlur(e){"id"===e?this.setState({emailValidationError:null}):"age"===e&&this.setState({ageValidationError:null}),this.setState({facebookValidationError:null,googleValidationError:null})}handleLoginFailure(e,t){const{clearPassword:i,email:n,onLoginWithMfa:o}=this.props;this.contextLogSignupLoginEvent(7535);const a=e.http_status===d.a.RESPONSE_CODE_TOO_MANY_REQUESTS?d.a.RESPONSE_CODE_TOO_MANY_REQUESTS:e.api_error_code;if(a===d.a.LOGIN_MFA_REQUIRED)return void O.c.handleLoginMfa(t,e.data,o);const s=O.c.getLoginErrorState(e,"emailPasswordStep",n,y.a,this.updateAccountRecoveryModal);s?(this.setState({accountRecoveryModalType:k.a[a],...s}),i&&s.passwordValidationError&&i(),this.setLoadingState(!1)):(g.a._("Sorry! Something went wrong on our end.","Error message shown when user tried to login but error occured, and we don't have any other information about the error. May or may not be recoverable by the user.","Error message shown when user tried to login but error occured, and we don't have any other information about the error. May or may not be recoverable by the user."),Object(v.a)(g.a._("Sorry! Something went wrong on our end.")),this.setLoadingState(!1))}handleLoginSuccess(e){this.contextLogSignupLoginEvent(7536),O.c.storeLoginCredentialsToBrowser(e);const{showResponseMessageModal:t}=this.props;t?t(!1):window.location.reload()}login(e){this.setLoadingState(!0);const t=e||{username_or_email:this.props.email,password:this.props.password},i={container:this.props.container,hybridTier:this.context.hybridTier,page:this.context.pageType};Object(u.a)(t,i,this.props.requestContext.seoUnauthExperiments).then(()=>{this.handleLoginSuccess(t)},e=>{e.api_error_code===d.a.INVALID_PASSWORD_ERROR_CODE?(this.setState({passwordValidationError:e.message}),this.setLoadingState(!1)):e.api_error_code===d.a.INVALID_PASSWORD_FB_USER?(this.setState({facebookValidationError:e.message}),this.setLoadingState(!1)):e.api_error_code===d.a.INVALID_PASSWORD_GOOGLE_USER?(this.setState({googleValidationError:e.message}),this.setLoadingState(!1)):e.api_error_code===d.a.LOGIN_MFA_REQUIRED?(O.c.storeLoginCredentialsToBrowser(t),this.props.onLoginWithMfa(t,e.data)):(this.setState({emailValidationError:e.message}),this.setLoadingState(!1))})}contextLogSignupLoginEvent(e){const{viewer:t}=this.props;t.isAuth?Object(L.a)(e,{login_state:t.isLimitedLogin?2:1,signup_login_method:1}):Object(L.a)(e,{signup_login_method:1})}validateEmailAvailable(e){this.setLoadingState(!0);const{hybridTier:t,pageType:i}=this.context,{container:n,email:o,password:a,requestContext:{seoUnauthExperiments:s}}=this.props;this.checkEmailExistsWithCompletion(o,()=>{const e={username_or_email:o,password:a},r={container:n,hybridTier:t,page:i};Object(u.a)(e,r,s).then(t=>{this.handleLoginSuccess(e)},t=>{this.handleLoginFailure(t,e)}),this.contextLogSignupLoginEvent(7534)},()=>{if(!this.validateAgeRequirement()&&!this.validatePasswordRequirement()){if(Object(p.a)(o))return this.setLoadingState(!1),void this.setState({emailFieldHasError:!0});this.completeRegistration(e)}})}render(){const{additionalChildren:e,dark:t}=this.props,i=I.signupContainer,n=o.a.createElement(k.b,{modalType:this.state.accountRecoveryModalType,updateAccountRecoveryModal:this.updateAccountRecoveryModal,email:this.props.email,onLoginWithMfa:this.props.onLoginWithMfa,onLoginWithSuspended:this.onLoginWithSuspended,onLoginWithVoluntarilyDeactivated:this.onLoginWithVoluntarilyDeactivated});return o.a.createElement("div",{style:i},n,this.renderButtons(),o.a.createElement(w.a,{dark:t||!1}),e)}}V.contextTypes={country:f.a.string,hybridTier:f.a.string,pageType:f.a.string};var N=Object(C.compose)(F.e,Object(a.connect)(e=>({viewer:e.viewer})))(V),j=i("3NaU");function W(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.d(t,"a",(function(){return z}));const U={signup:{margin:"0 auto",position:"relative",textAlign:"center"},inputStyleOverrides:{backgroundColor:"#f0f0f0",border:"0px",outline:"none"}},D=Object.freeze({SIGNUP:"signup"});class z extends n.Component{constructor(...e){super(...e),W(this,"state",{step:D.SIGNUP})}showStep(e){if(e===D.SIGNUP)return o.a.createElement(j.a,null,({tokenV3:e,refreshToken:t})=>o.a.createElement(N,{additionalChildren:this.props.additionalEmailPasswordChildren,age:this.props.age,container:this.props.container,dark:this.props.dark,disablePostSignupNextUrl:this.props.disablePostSignupNextUrl,email:this.props.email,emailValidationError:this.props.emailValidationError,setWelcomeBackMessageForExistingEmail:this.props.setWelcomeBackMessageForExistingEmail,loadingIndicatorCallback:this.props.loadingIndicatorCallback,name:this.props.name,nextUrlParam:this.props.nextUrlParam,passwordValidationError:this.props.passwordValidationError,inputStyleOverrides:U.inputStyleOverrides,onAgeChange:this.props.onAgeChange,onFBPhoneOnlyConnectVerified:this.props.onFBPhoneOnlyConnectVerified,onEmailChange:this.props.onEmailChange,onFBEmailDeniedPerm:this.props.onFBEmailDeniedPerm,onSocialConnectVerified:this.props.onSocialConnectVerified,onLoginWithMfa:this.props.onLoginWithMfa,onPasswordChange:this.props.onPasswordChange,password:this.props.password,setNameFromEmail:this.props.setNameFromEmail,showLoginWelcomeLoadingFn:this.props.showLoginWelcomeLoadingFn,showSignupWelcomeLoadingFn:this.props.showSignupWelcomeLoadingFn,signupSeparatorContinuous:this.props.signupSeparatorContinuous,signupSource:this.props.signupSource,sm:this.props.sm,suppressFocus:this.props.suppressFocus,clearPassword:this.props.clearPassword,onShowRegisterForm:this.props.onShowRegisterForm,showResponseMessageModal:this.props.showResponseMessageModal,recaptchaTokenV3:e,refreshRecaptchaTokenV3:t}))}render(){return o.a.createElement("div",{"data-test-id":"signup",style:U.signup},this.showStep(this.state.step))}}W(z,"defaultProps",{dark:!0})},zYLT:function(e,t,i){i.d(t,"a",(function(){return a}));var n=i("q1tI"),o=i.n(n);function a({size:e,noCircle:t}){return o.a.createElement("svg",{height:e,style:{display:"block"},viewBox:t?"3 3 70 70":"-3 -3 82 82",width:e},t?null:o.a.createElement("circle",{cx:"38",cy:"38",fill:"white",r:"40"}),o.a.createElement("path",{d:"M27.5 71c3.3 1 6.7 1.6 10.3 1.6C57 72.6 72.6 57 72.6 37.8 72.6 18.6 57 3 37.8 3 18.6 3 3 18.6 3 37.8c0 14.8 9.3 27.5 22.4 32.5-.3-2.7-.6-7.2 0-10.3l4-17.2s-1-2-1-5.2c0-4.8 3-8.4 6.4-8.4 3 0 4.4 2.2 4.4 5 0 3-2 7.3-3 11.4C35.6 49 38 52 41.5 52c6.2 0 11-6.6 11-16 0-8.3-6-14-14.6-14-9.8 0-15.6 7.3-15.6 15 0 3 1 6 2.6 8 .3.2.3.5.2 1l-1 3.8c0 .6-.4.8-1 .4-4.4-2-7-8.3-7-13.4 0-11 7.8-21 22.8-21 12 0 21.3 8.6 21.3 20 0 12-7.4 21.6-18 21.6-3.4 0-6.7-1.8-7.8-4L32 61.7c-.8 3-3 7-4.5 9.4z",fill:"#e60023",fillRule:"evenodd"}))}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/js/pjs-10-0d30b817c8d670e11320.mjs.map
